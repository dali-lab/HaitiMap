<!DOCTYPE html>
<html>
<head>
<title>Historical</title>
 
<!--Leaflet imports-->
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

<!--link to jquery-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

 <!-- loading in css -->
<link rel="stylesheet" href="style.css" type="text/css" />



<!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawTotalsChart);
      google.setOnLoadCallback(drawDaysChart);
      google.setOnLoadCallback(drawCausesChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      //Pie Chart with Crime totals per territory
      function drawTotalsChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Base');
        data.addColumn('number', 'Murders');
        data.addRows([
          ['Bel Air', 5],
          ['Delmas 2-4', 8],
          ['Foutouron La Saline', 5],
          ['Warf Jer, Fort Dimanche, P.R.', 3]
        ]);

        // Set chart options
        var options = {'title':'Crimes per Base',
                       titleTextStyle: { color: 'white',
						  fontName: 'Lucida Sans Unicode',
						  fontSize: 10},
        				backgroundColor: 'black', 
                       	'width':380,
                       	'height':300,
                   		'hAxis': {baselineColor: 'white', textStyle: {color: 'white', fontName: 'Lucida Sans Unicode'}},
                   		'vAxis': {textStyle: {color:'white', fontName: 'Lucida Sans Unicode'}},
                   		legend:'none'
						};

        // Instantiate and draw our chart, passing in some options.
        var totalsChart = new google.visualization.ColumnChart(document.getElementById('totalsChart_div'));
        totalsChart.draw(data, options);
      }

      //Bar Chart with Crime totals per Day of Month
      function drawDaysChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Day');
        data.addColumn('number', 'Murders');
        data.addRows([
          ['4', 7],
          ['8', 3],
          ['17', 3],
          ['16', 2],
          ['22', 1],
          ['24', 3],
          ['27', 1],
          ['29', 1]
        ]);

        // Set chart options
        var options = {'title':'Crimes per Day',
        				opacity:0.8,
                       titleTextStyle: { color: 'white',
						  fontName: 'Lucida Sans Unicode',
						  fontSize: 10},
        				backgroundColor: 'black',
                       	'width':380,
                       	'height':300,
                   		'hAxis': {baselineColor: 'white', textStyle: {color: 'white', fontName: 'Lucida Sans Unicode'}},
                   		'vAxis': {textStyle: {color:'white', fontName: 'Lucida Sans Unicode'}},
                   		legend:'none'
						};

        // Instantiate and draw our chart, passing in some options.
        var daysChart = new google.visualization.BarChart(document.getElementById('daysChart_div'));
        daysChart.draw(data, options);
      }

      function drawCausesChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Cause');
        data.addColumn('number', 'Murders');
        data.addRows([
          ['Appartenance base 117', 12],
          ['Banditisme', 2],
          ['Conflit', 3],
          ['Vol', 4]
        ]);

        // Set chart options
        var options = {title:'Cause of Crimes',
        				titleTextStyle: { color: 'white',
						  fontName: 'Lucida Sans Unicode',
						  fontSize: 10},
        				backgroundColor: 'black',
                       	'width':380,
                       	'height':300,
                   		'legend':{ textStyle :{ 
	                   		color: 'white',
							fontName: 'Lucida Sans Unicode',
							fontSize: 10,
							}}
						};

        // Instantiate and draw our chart, passing in some options.
        var causesChart = new google.visualization.PieChart(document.getElementById('causesChart_div'));
        causesChart.draw(data, options);
      }
    </script>


 </head>

<body>

	<!--Navigation Bar-->
	<div id="navigation">
		<a href="about.html">ABOUT</a>
		
		<a href="historical.html">HISTORICAL DATA</a>

		<a href="hm.html">REPORT A CRIME</a>
		
		<div id="subnavigation">
		<ul>
			<li class='active'><a href="historical.html"><span>DATA BY TERRITORY</span></a></li>
			<li class='has-sub'><a href="#"><span>DATA BY MONTH</span></a>
				<ul>
					<li><a href="december2013.html"><span>December 2013</span></a></li>
					<li><a href="november2013.html"><span>November 2013</span></a></li>
					<li><a href="october2013.html"><span>October 2013</span></a></li>
					<li><a href="september2013.html"><span>September 2013</span></a></li>
					<li><a href="august2013.html"><span>August 2013</span></a></li>
					<li><a href="july2013.html"><span>July 2013</span></a></li>
					<li><a href="june2013.html"><span>June 2013</span></a></li>
					<li><a href="may2013.html"><span>May 2013</span></a></li>
					<li><a href="april2013.html"><span>April 2013</span></a></li>
					<li><a href="march2013.html"><span>March 2013</span></a></li>
					<li><a href="february2013.html"><span>February 2013</span></a></li>
					<li><a href="january2013.html"><span>January 2013</span></a></li>

				</ul>
			</li>
		</ul>
		</div>
			
	</div>

	

	<!--Header-->

	<div id="content">

		<div id="sidebar">
			<div id="title" class="pad">
				<div id="slider">
					
					<a href="february2013.html" class="control_prev"> < </a>
					<a href="april2013.html" class="control_next"> > </a>
				</div>
				<h1>Historical Data</h1>
				<h2>March 2013</h2>
				<!--Div that will hold the pie chart-->
    			<div id="totalsChart_div"></div>
    			<br>
    			<div id="daysChart_div"></div>
    			<br>
    			<div id="causesChart_div"></div>
				
			</div>
			
		</div>

	</div>

	<!--Map-->
	<div id="map" style="width: 100%; height: 1100px"></div>

	<script type = "text/javascript" src="markers.js"></script>

	<script type = "text/javascript">

		//initialize a map and set it to the correct zoom
		var map = L.map('map', {zoomControl: false}).setView([18.559, -72.331], 15);

		//get the tiles from the HaitiMap project from Mapbox
		L.tileLayer('https://{s}.tiles.mapbox.com/v3/haitimap.i22979g9/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery © <a href="http://mapbox.com">Mapbox</a> ' + 'Limit zòn yo se apwoksimatif.',
			id: 'haitimap.i22979g9'
		}).addTo(map);


		//put the zoom bar in the bottom left corner
		map.addControl( L.control.zoom({position: 'bottomleft'}) );

		function popupFeature(feature) {
			
			return getName(feature.properties.title)
		}

		function getName(territory) {
				return territory == "Fort National" ? 'Fort National' :
		           territory == "Bel Air"  ? 'Bel Air' :
		           territory == "St. Martin"  ? 'St. Martin' :
		           territory == "Solino"  ? 'Solino' :
		           territory == "Foutouron La Saline"   ? "Foutouron La Saline" :
		           territory == "Delmas 2-4"   ? 'Delmas 2-4' :
		           territory == "Warf Jeremie"   ? "Warf Jeremie" :
		           territory == "P.R."   ? "Pont Rouge" :
		                      "Fort Dimanche";
		}

		//boilerplate style code for the features
		function style(feature) {
		    return {
		        fillColor: getColor(feature.properties.title),
		        color: getColor(feature.properties.title),
		        weight: 4,
		        fillOpacity: 0.3
		    };
		}

		//how to determing color of the territory by the territory's name
		function getColor(territory) {
		    return 	territory == "Bel Air"  ? '#2171b5' :
		    		territory == "Fort National" ? '#4292c6' :
		           	territory == "Solino"  ? '#6baed6' :
		           	territory == "St. Martin"  ? '#3182bd' :
		           	territory == "Foutouron La Saline"   ? "#08519c" :
		           	territory == "Delmas 2-4"   ? '#fdbe85' :
		                      '#74c476';
		}

		//what happeds when highlighting neighborhood		
		function highlightFeature(e) {
			var layer = e.target;

			layer.setStyle({
				weight: 5,
				color: '#666',
				dashArray: '',
				fillOpacity: 0.7
			});

			if (!L.Browser.ie && !L.Browser.opera) {
				layer.bringToFront();
			}

		}

		//when we need to reset the territory back 
		//to its original style
		function resetHighlight(e) {
			gjlayer.resetStyle(e.target);
		}

		//code that gets called/applied to each geoJson feature
		function onEachFeature(feature, layer) {

			layer.on({
				mouseover: popupFeature, 
				mouseout: resetHighlight
			});
		}

		//reading in the feature collection file 
		//then setting up each feature by calling style 
		//and onEachFeature
		var gjlayer = L.geoJson(gjFeatureCollection, {
			style: style,
			onEachFeature: onEachFeature
		}).addTo(map);

		

		 </script>

 	</body>

 </html>
